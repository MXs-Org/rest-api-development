{% extends "base.html" %}

{% block content %}
  <!-- container to be filled with entry cards by handlerbars -->
  <div id="entries-container" class="table-responsive"></div>

  {% raw %}
    <!-- handlerbars template for each entry -->
    <script id="entry-template" type="text/x-handlebars-template">
      {{#each result}}
      <div class="card">
        <div class="card-content">
          <span class="card-title">{{title}}</span>
          <p>{{text}}</p>
          <p class="grey-text text-lighten-2">{{#if public}} Public {{else}} Private {{/if}} entry published by {{author}} on {{publish_date}}</p>
        </div>
        <div class="card-action">
          <button class="delete-entry" onclick = "deleteEntry({{id}})">Delete</button>
          <button class="change-entry-permission" onclick = "changePermissionEntry({{id}}, {{public}})">{{#if public}} Change visibility to private {{else}} Change visibility to public {{/if}}</button>
        </div>
      </div>
      {{/each}}
    </script>
  {% endraw %}

{% endblock %}

{% block additional_scripts %}
<script type="text/javascript" src="{{ url_for('static', filename='js/handlebars.min.js') }}"></script>
<script type="text/javascript" src="{{ url_for('static', filename='js/my_entries.js') }}"></script>
<script type="text/javascript" src="{{ url_for('static', filename='js/redirect.js') }}"></script>
{% endblock %}
